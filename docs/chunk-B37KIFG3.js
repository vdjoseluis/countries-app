import{a as q,b as G}from"./chunk-5NJOTN4B.js";import{a as H}from"./chunk-4Y6L3UUT.js";import{a as N}from"./chunk-77LDLBZX.js";import{g as U,h as z,i as D,j as $}from"./chunk-5LPJRBJ6.js";import"./chunk-ZSSD5RUB.js";import"./chunk-FTN34QYB.js";import{h as j,j as R}from"./chunk-KLQYZYXN.js";import{Bb as v,Db as h,Fb as m,Ib as L,Ob as o,Pb as E,Qb as S,Rb as I,S as C,Sa as u,Ub as F,Va as a,Vb as V,Wa as y,aa as f,db as M,ia as g,ib as c,ja as _,n as P,pb as x,r as T,rc as A,sc as O,tb as d,ub as k,vb as w,wb as B,xb as r,yb as n,zb as p}from"./chunk-TAAER7OC.js";function J(i,t){i&1&&p(0,"mat-spinner",1)}function K(i,t){if(i&1){let e=v();r(0,"div",5)(1,"h3",6),o(2,"Coat of Arms"),n(),c(3,J,1,0,"mat-spinner",1),r(4,"img",16),h("load",function(){g(e);let l=m(2);return _(l.onImageLoad())})("error",function(){g(e);let l=m(2);return _(l.onImageError())}),n()()}if(i&2){let e=m(2);a(3),d(e.isImageLoading?3:-1),a(),x("src",e.country.coatOfArms.svg,u)("alt",e.country.name.common)}}function Q(i,t){i&1&&o(0,", ")}function W(i,t){if(i&1&&(r(0,"a",17),o(1),n(),c(2,Q,1,0)),i&2){let e=t.$implicit,s=t.$index,l=m(3);L("href","/countries/country/",e.cca3,"",u),a(),E(e.name.common),a(),d(s<l.borders.length-1?2:-1)}}function X(i,t){if(i&1&&(r(0,"li",10)(1,"strong",11),o(2,"Border countries:"),n(),w(3,W,3,4,null,null,k),n()),i&2){let e=m(2);a(3),B(e.borders)}}function Y(i,t){if(i&1){let e=v();r(0,"div",0)(1,"h1",2),o(2),n(),p(3,"hr",3),r(4,"div",4)(5,"div",5)(6,"h3",6),o(7,"Flag"),n(),p(8,"img",7),n(),c(9,K,5,3,"div",5),n(),r(10,"div",8)(11,"ul",9)(12,"li",10)(13,"strong"),o(14,"Capital: "),n(),o(15),n(),r(16,"li",10)(17,"strong"),o(18,"Population: "),n(),o(19),F(20,"number"),n(),r(21,"li",10)(22,"strong"),o(23,"Languages: "),n(),o(24),n(),r(25,"li",10)(26,"strong"),o(27,"Continent: "),n(),o(28),n(),r(29,"li",10)(30,"strong",11),o(31,"Location:"),n(),r(32,"a",12)(33,"mat-icon",13),o(34,"pin_drop"),n()()(),c(35,X,5,0,"li",10),n()(),p(36,"hr",3),r(37,"p",14),h("click",function(){g(e);let l=m();return _(l.addToFavourites(l.country))}),r(38,"mat-icon",15),o(39,"star"),n(),r(40,"span"),o(41,"Add to favourites"),n()()()}if(i&2){let e=m();a(2),I(" ( ",e.country.cca3," ) - ",e.country.name.official," "),a(6),x("src",e.country.flags.svg,u)("alt",e.country.name.common),a(),d(e.country.coatOfArms.svg?9:-1),a(6),E(e.country.capital),a(4),S("",V(20,12,e.country.population)," people "),a(5),S("",e.getFirstLanguage(e.country)," "),a(4),I("",e.country.region," - ( ",e.country.subregion," ) "),a(4),x("href",e.country.maps.googleMaps,u),a(3),d(e.borders.length>0?35:-1)}}function Z(i,t){i&1&&p(0,"mat-spinner",1)}var b=class i{constructor(t,e){this.route=t;this.router=e}countriesService=f(N);country;borders=[];_snackBar=f(H);openSnackBar(t,e){this._snackBar.open(t,e,{duration:3e3})}getFirstLanguage(t){return Object.values(t.languages)}ngOnInit(){this.route.params.pipe(C(({id:t})=>this.countriesService.searchCountryByCode(t).pipe(T(e=>e||(this.router.navigateByUrl(""),null)))),C(t=>t?(this.country=t,this.countriesService.getCountriesBordersByCodes(t.borders)):P(null))).subscribe({next:t=>{this.borders=t||[]},error:t=>{console.error("Error al cargar los datos:",t),this.borders=[]}})}isImageLoading=!0;onImageLoad(){this.isImageLoading=!1}onImageError(){this.isImageLoading=!1}addToFavourites(t){let e=this.countriesService.saveFavourite(t)||"Unable to add country";this.openSnackBar(e,"Close")}static \u0275fac=function(e){return new(e||i)(y(j),y(R))};static \u0275cmp=M({type:i,selectors:[["app-country-page"]],decls:2,vars:1,consts:[[1,"bg-slate-300","rounded-2xl","shadow-lg","shadow-sky-500"],[1,"mx-auto"],[1,"text-sm","md:text-2xl","font-medium","text-sky-600","text-center","tracking-widest","py-4"],[1,"border-slate-400","mx-4"],[1,"flex","justify-around","text-center","my-4"],[1,"flex-col"],[1,"text-xs","md:text-lg","py-2"],[1,"h-28","lg:h-40",3,"src","alt"],[1,"flex","justify-center","pt-6"],[1,"text-xs","sm:text-lg"],[1,"py-2"],[1,"pe-2"],["target","_blank",3,"href"],["matTooltip","Open map"],[1,"flex","items-center","p-4","text-xs","sm:text-lg","cursor-pointer",3,"click"],[1,"text-sky-600"],[1,"h-28","lg:h-40",3,"load","error","src","alt"],[3,"href"]],template:function(e,s){e&1&&c(0,Y,42,14,"div",0)(1,Z,1,0,"mat-spinner",1),e&2&&d(s.country?0:1)},dependencies:[O,A,$,D,G,q,z,U],encapsulation:2})};export{b as default};
